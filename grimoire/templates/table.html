{% import 'macros.html' as macros %}
{% extends "layout.html" %}
{% block body %}

<h2>{{ entity | capitalize | pluralize }} in Grimoires</h2>

<table class="scroll">
    <tr>
        <th></th>
        {% for uid, grimoire in grimoires.items() | sort %}
        <th><a href="{{ grimoire.link }}">{{ grimoire.properties.identifier }}</a></th>
        {% endfor %}
    </tr>
    {% for item in entities %}
    <tr>
        <th><a href="{{ item.link }}">{{ item.properties.identifier }}</a></th>
        {% for uid, grimoire in grimoires.items() | sort %}
        {% if uid in item.grimoires %}
        <td class="yes">
            <i class="fa fa-check"></i>
        </td>
        {% else %}
        <td></td>
        {% endif %}
        {% endfor %}
    </tr>
    {% endfor %}
    <tr>
        <th></th>
        {% for uid, grimoire in grimoires.items() %}
        <th><a href="{{ grimoire.link }}">{{ grimoire.properties.identifier }}</a></th>
        {% endfor %}
    </tr>
</table>

<h2>{{ entity | pluralize | capitalize }} that appear in only one grimoire</h2>

{% for grimoire, entities in isolates %}
<div class="card">
    <h3><a href="{{ grimoire.link }}">{{ grimoire.properties.identifier }}</a></h3>
    <ul class="many">
        {% for entity in entities %}
        <li><a href="{{ entity.link }}">{{ entity.properties.identifier }}</a></li>
        {% endfor %}
    </ul>
</div>
{% endfor %}

{% endblock %}

